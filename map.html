<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>Map to show places in Dundee that promote a Green Lifestyle</title>
    <script src= 'https://api.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <h1> Map</h1>
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light" id="navContent">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="navButton">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav navbar-center">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Recipes</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Zero-Waste Lifestyle</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">...</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Blog</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
    <div id='map'></div>


    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoiYXpkb2xhbiIsImEiOiJjazM4c29rMm0wOXoyM2JsM2NmMng4M25jIn0.O9sq62CU9p_Fh_9t4geqfQ';
      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/light-v9',
        center: [-2.982, 56.458],
        zoom: 14
      });


      map.on('load', function() {
     map.addLayer({
       "id": "points",
       "type": "symbol",
       "source": {
         "type": "geojson",
         "data": {
           "type": "FeatureCollection",
           "features": [{
             "type": "Feature",
             "geometry": {
               "type": "Point",
               "coordinates": [-2.991347, 56.456046]
             },
             "properties": {
               "title": "The Little Green Larder",
               "icon": "college"
             }
           },
           {
             "type": "Feature",
             "geometry": {
               "type": "Point",
               "coordinates": [-2.992987, 56.456318]
             },
             "properties": {
               "title": "Frasers Fruit and Veg",
               "icon": "college"
             }
           },
           {
             "type": "Feature",
             "geometry": {
               "type": "Point",
               "coordinates": [-2.971101, 56.463138]
             },
             "properties": {
               "title": "Computer Recyling Services LTD",
               "icon": "college"
             }
           },
           {
             "type": "Feature",
             "geometry": {
               "type": "Point",
               "coordinates": [-2.970805, 56.461827]
             },
             "properties": {
               "title": "Bernado's Charity",
               "icon": "rocket"
             }
           },
           {
             "type": "Feature",
             "geometry": {
               "type": "Point",
               "coordinates": [-3.013600, 56.479563]
             },
             "properties": {
               "title": "Wood Recylcing",
               "icon": "rocket"
             }
           },
           {
             "type": "Feature",
             "geometry": {
               "type": "Point",
               "coordinates": [-3.020453, 56.461815]
             },
             "properties": {
               "title": "Glass Recylcing Center",
               "icon": "triangle"
             },
             }]
         }
       },
       "layout": {
         "icon-image": "{icon}-15",
         "text-field": "{title}",
         "text-font": ["Roboto Regular"],
         "text-offset": [0.6, 0.1],
         "text-anchor": "left",
       }
     });
   });
   map.on('click', 'points', function(e) {
         var coordinates = e.features[0].geometry.coordinates.slice();
         var description = e.features[0].properties.description;
         while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
           coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
         }
         new mapboxgl.Popup()
           .setLngLat(coordinates)
           .setHTML(description)
           .addTo(map);
       });
       map.on('mouseenter', 'points', function() {
         map.getCanvas().style.cursor = 'pointer';
       });
       map.on('mouseleave', 'points', function() {
         map.getCanvas().style.cursor = '';
       });
     });
     map.addControl(new mapboxgl.NavigationControl());
 </script>

</body>

</html>
